<!-- weektotal header: start -->

<div flex-gt-sm="none" flex="none" style="height: 30px" layout="row" layout-align="space-between center">
    <div flex="none" class="md-body-1" style="min-width: 24px">
        Неделя {{$ctrl.weekTitle}}
    </div>
    <div flex="none" ng-if="(!!$ctrl.summary.fact.movingDuration || !!$ctrl.summary.plan.movingDuration) && false"
         class="md-body-1" style="background: grey; color: white; border-radius: 10px; padding: 0px 5px">
        {{100*$ctrl.summary.fact.movingDuration/$ctrl.summary.plan.movingDuration |number:0}}%</div>

    <!--
    <div hide show-gt-sm flex="none" ng-show="$ctrl.selected || $ctrl.accent">
        <md-checkbox ng-model="$ctrl.checked"
                     ng-change="$ctrl.onToggle({sid: $ctrl.week.sid, value: $ctrl.checked})"
                     aria-label="Checkbox 1" class="md-primary"
                     style="margin-bottom: 0px; margin-left: 12px">
        </md-checkbox>
    </div>-->

    <div flex="none">
        <md-menu md-position-mode="target-right target">
            <md-button class="md-icon-button " ng-click="$mdOpenMenu($event)" aria-label="More">
                <md-icon class="material-icons md-18">more_vert</md-icon>
            </md-button>
            <md-menu-content>
                <md-menu-item>
                    <md-button ng-click="$ctrl.onToggle(); $ctrl.checked = !$ctrl.checked">
                        {{!$ctrl.selected ? 'Выделить' : 'Снять выделение'}}
                    </md-button>
                </md-menu-item>
                <md-menu-item><md-button ng-click="$ctrl.onDelete()">Удалить</md-button></md-menu-item>
                <md-menu-item><md-button>Скопировать</md-button></md-menu-item>
                <md-menu-item><md-button disabled="disabled">Вставить</md-button></md-menu-item>
            </md-menu-content>
        </md-menu>
    </div>

</div>
<!--
<calendar-total-chart value="30" max="50" status="'ok'"></calendar-total-chart>
-->
<!-- weektotal header: end -->
<div ng-if="!!$ctrl.summary.fact.movingDuration || !!$ctrl.summary.plan.movingDuration || !!$ctrl.summary.fact.distance || !!$ctrl.summary.plan.distance">
    <section layout="row" class="sum">
        <md-icon flex="none" class="material-icons md-18">functions</md-icon>
        <div flex layout="column" class="md-body-1 secondary dark">
            <div flex="none" layout="row" layout-align="space-between center">
                <div flex="none">{{$ctrl.summary.fact.movingDuration | measureCalc:'default':'movingDuration'}}&nbsp</div>
                <div flex="none" class="disable dark">
                    <span>{{$ctrl.summary.plan.movingDuration | measureCalc:'default':'movingDuration'}}</span>
                </div>
            </div>
            <div flex="none" style="height: 2px; border-radius: 1px; background: #E0E0E0">
                <div ng-if="!!$ctrl.summary.fact.movingDuration || !!$ctrl.summary.plan.movingDuration"
                     style="max-width: 100%; height: 2px; border-radius: 1px; background: #9E9E9E; width: {{100*$ctrl.summary.fact.movingDuration/$ctrl.summary.plan.movingDuration}}%"></div>
            </div>
            <div flex="none" layout="row" layout-align="space-between center">
                <div flex="none">{{$ctrl.summary.fact.distance | measureCalc:'default':'distance'}}&nbsp</div>
                <div></div>
                <div flex="none" class="disable dark">
                    <span>{{$ctrl.summary.plan.distance | measureCalc:'default':'distance'}}</span>
                    <span>{{'distance' | measureUnit:'run' | translate}}</span>
                </div>
            </div>
        </div>
    </section>
</div>

<div ng-repeat="sport in $ctrl.primarySport track by $index">
    <div ng-if="$ctrl.total.hasOwnProperty(sport) && (!!$ctrl.total[sport].fact.movingDuration || !!$ctrl.total[sport].plan.movingDuration || !!$ctrl.total[sport].fact.distance || !!$ctrl.total[sport].plan.distance)">
        <md-divider></md-divider>
        <section layout="row" class="sport-sum">
            <md-icon flex="none" md-svg-src="assets/icon/{{::sport}}.svg" class="s18 dark-active"></md-icon>
            <div flex layout="column" class="md-body-1 secondary dark">
                <div flex="none" layout="row" layout-align="space-between center">
                    <div flex="none">{{$ctrl.total[sport].fact.movingDuration | measureCalc:sport:'movingDuration'}}&nbsp</div>
                    <div ></div>
                    <div flex="none" class="disable dark">
                        <span>{{$ctrl.total[sport].plan.movingDuration | measureCalc:sport:'movingDuration'}}</span>
                    </div>
                </div>
                <div flex="none" style="height: 2px; border-radius: 1px; background: #E0E0E0">
                    <div ng-if="!!$ctrl.total[sport].fact.movingDuration || !!$ctrl.total[sport].plan.movingDuration"
                         style="max-width: 100%; height: 2px; border-radius: 1px; background: #9E9E9E; width: {{100*$ctrl.total[sport].fact.movingDuration/$ctrl.total[sport].plan.movingDuration}}%"></div>
                </div>
                <div flex="none" layout="row" layout-align="space-between center">
                    <div flex="none">{{$ctrl.total[sport].fact.distance | measureCalc:sport:'distance'}}&nbsp</div>
                    <div></div>
                    <div flex="none" class="disable dark">
                        <span>{{$ctrl.total[sport].plan.distance | measureCalc:sport:'distance'}}</span>
                        <span>{{'distance' | measureUnit:sport | translate}}</span>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>