<div flex></div>

<md-card class="cathegories" layout="column">
	<section ng-if="$ctrl.cathegoriesByOwner.user.length" class="cathegories__section">
		<div class="md-body-2 md-padding cathegories__subheader">{{ 'reference.cathegories.user' | translate }}</div>
		<div
			dnd-list
			dnd-allowed-types="['user-cathegory']"
			dnd-drop="$ctrl.cathegoryReorder(index, item)"
			class="cathegories__list"
		>
			<div
				ng-repeat="cathegory in $ctrl.cathegoriesByOwner.user track by cathegory.id"
				dnd-draggable="cathegory"
				dnd-type="'user-cathegory'"
				draggable="true"
				ng-click="$ctrl.editCathegory(cathegory)"
				class="cathegory md-button"
				ng-class="{ 'cathegory-disabled': !cathegory.visible }"
				layout="row"
			>
				<md-icon flex="none" md-svg-src="assets/icon/{{ $ctrl.activityType(cathegory.activityTypeId).code }}.svg" class="cathegory__icon-circled"></md-icon>
				<div flex>
					<h3 class="cathegory__label-code">{{ cathegory.code }}</h3>
					<div class="cathegory__label-description">{{ cathegory.description | truncate }}</div>
				</div>
				<md-switch
					ng-model="$ctrl.cathegoryEnabled(cathegory)"
					ng-model-options="{ getterSetter: true }"
					ng-click="$event.stopPropagation()"
					class="md-primary cathegory__switch"
				/>
			</div>
		</div>
		<md-divider></md-divider>
	</section>

	<section ng-if="$ctrl.cathegoriesByOwner.coach.length" class="cathegories__section">
		<div class="md-body-2 md-padding cathegories__subheader">{{ 'reference.cathegories.coach' | translate }}</div>
		<div
			dnd-list
			dnd-allowed-types="['coach-cathegory']"
			dnd-drop="$ctrl.cathegoryReorder(index, item)"
			class="cathegories__list"
		>
			<div
				ng-repeat="cathegory in $ctrl.cathegoriesByOwner.coach"
				dnd-draggable="cathegory"
				dnd-type="'coach-cathegory'"
				draggable="true"
				ng-click="$ctrl.viewCathegory(cathegory)"
				class="cathegory md-button"
				ng-class="{ 'cathegory-disabled': !cathegory.visible }"
				layout="row"
			>
				<md-icon flex="none" md-svg-src="assets/icon/{{ $ctrl.activityType(cathegory.activityTypeId).code }}.svg" class="cathegory__icon-circled"></md-icon>
				<div flex>
					<h3 class="cathegory__label-code">{{ cathegory.code }}</h3>
					<div class="cathegory__label-author">Автор: {{ cathegory.userProfileCreator | userName }}</div>
					<div class="cathegory__label-description">{{ cathegory.description | truncate }}</div>
				</div>
				<md-switch
					ng-model="$ctrl.cathegoryEnabled(cathegory)"
					ng-model-options="{ getterSetter: true }"
					ng-click="$event.stopPropagation()"
					class="md-primary cathegory__switch"
				/>
			</div>
		</div>
		<md-divider></md-divider>
	</section>

	<section ng-if="$ctrl.cathegoriesByOwner.club.length" class="cathegories__section">
		<div class="md-body-2 md-padding cathegories__subheader">{{ 'reference.cathegories.club' | translate }}</div>
		<div
			dnd-list
			dnd-allowed-types="['club-cathegory']"
			dnd-drop="$ctrl.cathegoryReorder(index, item)"
			class="cathegories__list"
		>
			<div
				ng-repeat="cathegory in $ctrl.cathegoriesByOwner.club"
				dnd-draggable="cathegory"
				dnd-type="'club-cathegory'"
				draggable="true"
				ng-click="$ctrl.viewCathegory(cathegory)"
				class="cathegory md-button"
				ng-class="{ 'cathegory-disabled': !cathegory.visible }"
				layout="row"
			>
				<md-icon flex="none" md-svg-src="assets/icon/{{ $ctrl.activityType(cathegory.activityTypeId).code }}.svg" class="cathegory__icon-circled"></md-icon>
				<div flex>
					<h3 class="cathegory__label-code">{{ cathegory.code }}</h3>
					<div class="cathegory__label-author">Автор: {{ cathegory.userProfileCreator | userName }} {{ cathegory.groupProfile | clubName }}</div>
					<div class="cathegory__label-description">{{ cathegory.description | truncate }}</div>
				</div>
				<md-switch 
					ng-model="$ctrl.cathegoryEnabled(cathegory)"
					ng-model-options="{ getterSetter: true }"
					ng-click="$event.stopPropagation()"
					class="md-primary cathegory__switch"
				/>
			</div>
		</div>
		<md-divider></md-divider>
	</section>

	<section ng-if="$ctrl.cathegoriesByOwner.system.length" class="cathegories__section">
		<div class="md-body-2 md-padding cathegories__subheader">{{ 'reference.cathegories.system' | translate }}</div>
		<div
			dnd-list
			dnd-allowed-types="['system-cathegory']"
			dnd-drop="$ctrl.cathegoryReorder(index, item)"
			class="cathegories__list"
		>
			<div
				ng-repeat="cathegory in $ctrl.cathegoriesByOwner.system"
				dnd-draggable="cathegory"
				dnd-type="'system-cathegory'"
				draggable="true"
				ng-click="$ctrl.viewCathegory(cathegory)"
				class="cathegory md-button"
				ng-class="{ 'cathegory-disabled': !cathegory.visible }"
				layout="row"
			>
				<md-icon flex="none" md-svg-src="assets/icon/{{ $ctrl.activityType(cathegory.activityTypeId).code }}.svg" class="cathegory__icon-circled"></md-icon>
				<div flex>
					<h3 class="cathegory__label-code">{{ cathegory | cathegoryCode }}</h3>
					<div class="cathegory__label-description">{{ cathegory.description | truncate }}</div>
				</div>
				<md-switch
					ng-model="$ctrl.cathegoryEnabled(cathegory)"
					ng-model-options="{ getterSetter: true }"
					ng-click="$event.stopPropagation()"
					class="md-primary cathegory__switch"
				/>
			</div>
		</div>
	</section>
</md-card>

<div style="width: 200px; margin-top: 61px; text-align: center">
	<md-button ng-click="$ctrl.createCathegory()" class="md-fab md-accent md-hue-2">
		<md-icon class="material-icons">add</md-icon>
	</md-button>
</div>

<div flex></div>