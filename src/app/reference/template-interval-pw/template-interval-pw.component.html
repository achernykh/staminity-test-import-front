<form name="$ctrl.form" class="template-interval">
	<md-list class="md-dense slim-input bg-grey-100">
		<md-list-item>
			<p class="md-caption" style="color: #455A64">{{ 'reference.templates.task' | translate }}</p>
			<p class="md-caption md-dark md-secondary" ng-class="{ 'md-inactive': !$ctrl.ftpMode }"
				style="text-align: right; margin-right: 8px">%ПАНО: {{ $ctrl.ftpMode? 'ВКЛ' : 'ВЫКЛ ' }}</p>
			<md-switch 
				class="md-secondary md-primary" 
				ng-model="$ctrl.ftpMode"
			></md-switch>
		</md-list-item>
		<md-list-item class="bg-grey-100">
			<md-table-container>
				<table md-table>
					<thead md-head>
						<tr md-row>
							<th md-column><span></span></th>
							<th md-column style="min-width: 50px"><span>Ед.изм</span></th>
							<th md-column md-numeric style="min-width: 65px"><span>План</span></th>
						</tr>
					</thead>
					<tbody md-body>
						<tr md-row ng-repeat="measure in $ctrl.measures">
							<td md-cell>
								<md-icon md-svg-src="assets/icon/{{ measure }}.svg" class="dark-active"></md-icon>
							</td>
							<td md-cell show>
								<span ng-if="$ctrl.ftpMode && $ctrl.isInterval(measure)">{{ '%ПАНО' | translate }}</span>
								<span ng-if="!($ctrl.ftpMode && $ctrl.isInterval(measure))">{{ measure | measureUnit:$ctrl.activityType.typeBasic | translate }}</span>
							</td>
							<td md-cell>
								<md-input-container>
									<!-- <input 
										ng-if="$ctrl.isInterval(measure)"
										interval="true" 
										measure-input
										ng-model="measure"
										name="plan_{{::measure}"
										measure="measure.$key"
										ng-attr-sport={{$ctrl.sport}}
										ftp-mode="$ctrl.isFTP()" ftp="$ctrl.getFTP(measure.$key,$ctrl.sport)"
										ng-change="$ctrl.changeValue(measure.$key)"
										ng-disabled="!$ctrl.item.isCreator && !$ctrl.item.isMyCoach"
									/> -->
									<input 
										ng-if="$ctrl.isInterval(measure)"
										interval="true" 
										measure-input
										ng-model="$ctrl.interval[measure]"
										measure="measure"
										ng-attr-sport="{{ $ctrl.activityType.typeBasic }}" 
										interval="false"
										ftp-mode="$ctrl.ftpMode" 
										ftp="$ctrl.getFTP(measure, $ctrl.activityType.typeBasic)"
										ng-change="$ctrl.changeValue(measure)"
										ng-disabled="$ctrl.mode !== 'create'"
										name="plan_{{ :: measure }}"
									/>
									<!-- <input 
										ng-if="!$ctrl.isInterval(measure)"
										interval="false" 
										measure-input
										name="plan_{{::measure}}"
										ng-model="measure.durationValue"
										measure="measure.$key"
										ng-attr-sport={{$ctrl.sport}} 
										ftp-mode="$ctrl.isFTP()" ftp="$ctrl.getFTP(measure.$key,$ctrl.sport)"
										ng-change="$ctrl.changeValue(measure.$key)"
										ng-disabled="!$ctrl.item.isCreator && !$ctrl.item.isMyCoach"
									/> -->
									<input 
										ng-if="!$ctrl.isInterval(measure)"
										interval="false" 
										measure-input
										ng-model="$ctrl.interval[measure].durationValue"
										measure="measure"
										ng-attr-sport="{{ $ctrl.activityType.typeBasic }}" 
										interval="false"
										ftp-mode="$ctrl.ftpMode" 
										ftp="$ctrl.getFTP(measure, $ctrl.activityType.typeBasic)"
										ng-change="$ctrl.changeValue(measure)"
										ng-disabled="$ctrl.mode !== 'create'"
										name="plan_{{ :: measure }}"
									/>
								</md-input-container>
							</td>
						</tr>
					</tbody>
				</table>
			</md-table-container>
		</md-list-item>

		<div class="md-caption error-block" ng-messages="$ctrl.form.$error" ng-if="$ctrl.form.$dirty && !$ctrl.form.$valid">
			<div ng-message="required">{{ 'activity.error.required' | translate }}</div>
			<div ng-message="needDuration">{{ 'activity.error.needDuration' | translate }}</div>
			<div ng-message="singleDuration">{{ 'activity.error.singleDuration' | translate }}</div>
			<div ng-message="singleIntensity">{{ 'activity.error.singleIntensity' | translate }}</div>
		</div>

		<md-list-item style="margin-top: 16px; margin-bottom: 40px">
			<md-input-container flex class="md-block no-message">
				<md-icon class="material-icons">event_note</md-icon>
				<label class="icon">{{ 'reference.templates.trainerPrescription' | translate }}</label>
				<textarea 
					ng-model="$ctrl.interval.trainerPrescription"
					class="icon" name="trainerPrescription" rows="1"
					ng-disabled="$ctrl.mode !== 'create'"
				></textarea>
			</md-input-container>
		</md-list-item>
	</md-list>
</form>