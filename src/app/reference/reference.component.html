<application-frame class="reference" layout-gt-sm="row" layout="column">

	<div class="reference__filters">
		<md-tabs md-selected="$ctrl.tab" class="md-primary md-hue-3 md-body-1" md-dynamic-height="true">
			<md-tab label="{{ 'reference.templates.title' | translate }}">
				<md-content class="md-padding reference__filters-content">
					<md-input-container class="md-block no-message reference__filter-input" md-no-float layout="row">
						<md-icon flex="none" md-svg-src="assets/icon/{{ $ctrl.templatesFilters.activityType.code || 'run' }}.svg"></md-icon>
						<md-select 
							placeholder="{{ 'reference.sport' | translate }}"
							flex name="activity-type" class="icon"
							ng-model="$ctrl.templatesFilters.activityType"
							ng-change="$ctrl.templatesFilters = $ctrl.updateFilters($ctrl.templatesFilters)"
						>
							<md-option 
								ng-repeat="activityType in $ctrl.activityTypes" 
								ng-value="activityType"
							>{{ 'sport.' + activityType.code | translate }}</md-option>
						</md-select>
					</md-input-container>
					<md-input-container class="md-block no-message reference__filter-input" md-no-float layout="row">
						<md-icon class="material-icons" ng-click="$ctrl.link('https://help.staminity.com/ru/basics/activity-categories.html')" style="cursor: pointer">tune</md-icon>
						<md-select 
							ng-model="$ctrl.templatesFilters.cathegory" 
							ng-change="$ctrl.templatesFilters = $ctrl.updateFilters($ctrl.templatesFilters)"
							placeholder="{{ 'reference.templates.cathegory' | translate }}"
							name="category" class="icon"
						>
							<md-option 
								ng-repeat="cathegory in $ctrl.templatesFilterCathegories" 
								ng-value="cathegory"
							>{{ cathegory | cathegoryCode }}</md-option>
						</md-select>
						<div ng-messages="$ctrl.form.cathegory.$error" role="alert">
							<div ng-message="required" translate="form.required"></div>
						</div>
					</md-input-container>
				</md-content>
			</md-tab>
			<md-tab label="{{ 'reference.cathegories.title' | translate }}">
				<md-content class="md-padding reference__filters-content">
					<md-input-container class="md-block no-message reference__filter-input" md-no-float layout="row">
						<md-icon flex="none" md-svg-src="assets/icon/{{ $ctrl.cathegoriesFilters.activityType.code || 'run' }}.svg"></md-icon>
						<md-select 
							placeholder="{{ 'reference.sport' | translate }}"
							flex name="activity-type" class="icon"
							ng-model="$ctrl.cathegoriesFilters.activityType"
							ng-change="$ctrl.cathegoriesFilters = $ctrl.updateFilters($ctrl.cathegoriesFilters)"
						>
							<md-option 
								ng-repeat="activityType in $ctrl.activityTypes" 
								ng-value="activityType"
							>{{ 'sport.' + activityType.code | translate }}</md-option>
						</md-select>
					</md-input-container>
				</md-content>
			</md-tab>
		</md-tabs>
	</div>

	<templates 
		ng-if="$ctrl.tab === 0"
		templates="$ctrl.templates" 
		cathegories="$ctrl.cathegories" 
		filters="$ctrl.templatesFilters" 
		on-templates-change="$ctrl.onTemplatesChange" 
		on-template-change="$ctrl.onTemplateChange" 
		on-template-delete="$ctrl.onTemplateDelete" 
		user="$ctrl.user"
		flex layout-gt-sm="row"
	></templates>

	<cathegories 
		ng-if="$ctrl.tab === 1"
		templates="$ctrl.templates" 
		cathegories="$ctrl.cathegories" 
		filters="$ctrl.cathegoriesFilters" 
		on-cathegories-change="$ctrl.onCathegoriesChange"
		on-cathegory-change="$ctrl.onCathegoryChange" 
		on-cathegory-delete="$ctrl.onCathegoryDelete" 
		user="$ctrl.user"
		flex layout-gt-sm="row"
	></cathegories>

</application-frame>

